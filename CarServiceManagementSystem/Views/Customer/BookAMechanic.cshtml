@model IEnumerable<CarServiceManagementSystem.Models.tbl_mechanic>

@{
    ViewBag.Title = "BookAMechanic";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="container-fluid">
    <div class="nk-content-inner">
        <div class="nk-content-body">
            <div class="nk-block-head nk-block-head-sm">
                <div class="nk-block-between">
                    <div class="nk-block-head-content">
                        <h3 class="nk-block-title page-title">Mechanics Lists</h3>
                        <div class="nk-block-des text-soft">
                            <p>There Are @ViewBag.count Available Mechanics.</p>
                        </div>
                    </div>
                </div><!-- .nk-block-between -->
            </div><!-- .nk-block-head -->
            <div class="nk-block">
                <div class="card card-bordered card-stretch">
                    <div class="card-inner-group">
                        <div class="card-inner p-0">
                            <div class="nk-tb-list nk-tb-ulist is-compact">
                                <div class="nk-tb-item nk-tb-head">
                                    <div class="nk-tb-col"><span class="sub-text">User</span></div>
                                    <div class="nk-tb-col tb-col-md"><span class="sub-text">Phone</span></div>
                                    <div class="nk-tb-col tb-col-lg"><span class="sub-text">Garage Name</span></div>
                                    <div class="nk-tb-col tb-col-lg"><span class="sub-text">Address</span></div>
                                    <div class="nk-tb-col tb-col-lg"><span class="sub-text">Ratings</span></div>
                                    <div class="nk-tb-col"><span class="sub-text">Status</span></div>
                                </div><!-- .nk-tb-item -->
                                @foreach (var item in Model)
                                {

                                    char f = item.firstname[0];
                                    char l = item.lastname[0];
                            <div class="nk-tb-item">
                                <div class="nk-tb-col">
                                    <a href="html/general/user-details-regular.html">
                                        <div class="user-card">
                                            <div class="user-avatar bg-primary">
                                                <span>@f@l </span>
                                            </div>
                                            <div class="user-info">
                                                <span class="tb-lead">@Html.DisplayFor(x => item.firstname) @Html.DisplayFor(x => item.lastname) <span class="dot dot-success d-md-none ml-1"></span></span>
                                                <span>@Html.DisplayFor(x => item.username)</span>
                                            </div>
                                        </div>
                                    </a>
                                </div>
                                <div class="nk-tb-col tb-col-lg">
                                    <span>@Html.DisplayFor(x => item.contact)</span>
                                </div>
                                <div class="nk-tb-col tb-col-lg">
                                    <span>@Html.DisplayFor(x => item.garageName)</span>
                                </div>
                                <div class="nk-tb-col tb-col-lg">
                                    <span>@Html.DisplayFor(x => item.address)</span>
                                </div>
                                <div class="nk-tb-col tb-col-lg">
                                    <span>@Html.DisplayFor(x => item.avg_rating)</span>
                                </div>
                                @if (item.isBooked)
                                {
                                    var status = "Booked";
                                    <div class="nk-tb-col tb-col-md">
                                        <span class="tb-status text-danger ">@Html.DisplayFor(x => status)</span>
                                    </div>
                                }
                                else
                                {
                                    var status = "Available";
                                    <div class="nk-tb-col tb-col-md">
                                        <span class="tb-status text-success">@Html.DisplayFor(x => status)</span>
                                    </div>
                                }
                                @if (!item.isBooked) { 
                                
                                    <div class="nk-tb-col nk-tb-col-tools">
                                        <ul class="nk-tb-actions gx-2">
                                            <li class="nk-tb-action-hidden">
                                                <a href="@Url.Action("BookNow", "Customer", new { id = item.id })" class="btn btn-sm btn-icon btn-trigger" data-toggle="tooltip" data-placement="top" title="Book Now">
                                                    
                                                    <em class="icon ni ni-mail-fill"></em>
                                                </a>
                                            </li>
                                        </ul>
                                    </div>
                                }
                            </div>
                                }                               

                            </div><!-- .nk-tb-list -->
                        </div><!-- .card-inner -->
                        <!--<div class="card-inner">
                            <ul class="pagination justify-content-center justify-content-md-start">
                                <li class="page-item"><a class="page-link" href="#">Prev</a></li>
                                <li class="page-item"><a class="page-link" href="#">1</a></li>
                                <li class="page-item"><a class="page-link" href="#">2</a></li>
                                <li class="page-item"><span class="page-link"><em class="icon ni ni-more-h"></em></span></li>
                                <li class="page-item"><a class="page-link" href="#">6</a></li>
                                <li class="page-item"><a class="page-link" href="#">7</a></li>
                                <li class="page-item"><a class="page-link" href="#">Next</a></li>
                            </ul>-->
                        <!-- .pagination -->
                        <!--</div>--><!-- .card-inner -->
                    </div><!-- .card-inner-group -->
                </div><!-- .card -->
            </div><!-- .nk-block -->
        </div>
    </div>
</div>

